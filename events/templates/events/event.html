{% load staticfiles %}
<!DOCTYPE html>
<html>
<head>
    <title>BEE [{{eventset.alias}}] : event {{event_id}}</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <link rel="icon" href="{% static 'css/bee.ico' %}" />
    <link rel="stylesheet" href="{% static 'css/lib/bootstrap.min.css' %}" />
    <link rel="stylesheet" href="{% static 'css/event.css' %}" />
    <link rel="stylesheet" href="{% static 'css/lib/jstree/style.css' %}" />
</head>
<body>
    <nav class="navbar navbar-inverse">
      <div class="container-fluid" style="padding:0;">
        <div>
          <ul class="nav navbar-nav">
            <li class="active">
                <a href="{% url 'eventsets' %}"
                   style="background-color:#5B8F09; padding-left: 8px; border-radius: 0px 0px 10px 0px;">
                   <img src="{% static 'css/bee.png' %}" height="20" width="20" />
                   &nbsp;BEE for Wire-Cell
                </a>
            </li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown"
                 role="button" aria-haspopup="true" aria-expanded="false">
                 Event
                 <span class="caret"></span>
              </a>
              <ul class="dropdown-menu">
                <li><a href="#" id="toggleMC">Show MC <span class="hotkey">m</span></a></li>
                <li role="separator" class="divider"></li>
                <li><a href="" data-toggle="modal" data-target="#cmdModal">Command List </a></li>
              </ul>
            </li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown"
                 role="button" aria-haspopup="true" aria-expanded="false">
                 Navigation
                 <span class="caret"></span>
              </a>
              <ul class="dropdown-menu">
                <li><a href="#" id="nextEvent">Next Event <span class="hotkey">n</span></a></li>
                <li><a href="#" id="prevEvent">Prev Event <span class="hotkey">p</span></a></li>
                <li role="separator" class="divider"></li>
                <li><a href="#" id="nextRecon">Next Recon <span class="hotkey">]</span></a></li>
                <li><a href="#" id="prevRecon">Prev Recon <span class="hotkey">[</span></a></li>
                <li role="separator" class="divider"></li>
                <li><a href="#" id="nextSlice">Next Slice <span class="hotkey">k</span></a></li>
                <li><a href="#" id="prevSlice">Prev Slice <span class="hotkey">j</span></a></li>
              </ul>
            </li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Camera <span class="caret"></span></a>
              <ul class="dropdown-menu">
                <li><a href="#" id="centerToEvent">Center to Event <span class="hotkey">c</span></a></li>
                <li><a href="#" id="xzView">X-Z View <span class="hotkey">z</span></a></li>
                <li><a href="#" id="xuView">X-U View <span class="hotkey">u</span></a></li>
                <li><a href="#" id="xvView">X-V View <span class="hotkey">v</span></a></li>
                <li><a href="#" id="resetCamera">Reset <span class="hotkey">r</span></a></li>
                <li role="separator" class="divider"></li>
                <li><a href="#" id="play">Play (Fullscreen)</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <div id="container"></div>

    <div id="statusbar">
        slice #: <span id="slice_number">0</span> |
        slice x: <span id="slice_x">0</span>
    </div>
    <div id="mc"></div>
    <div class="alert alert-info fade in" id="loadingbar">
        <a href="#" class="close" data-dismiss="alert">&times;</a>
        Working ...
    </div>

    <div id="cmdModal" class="modal hide fade" role="dialog" tabindex="-1">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title">List of Commands</h4>
          </div>
          <div class="modal-body">
            <table class='table'>
                <thead>
                  <tr>
                    <th>Command</th><th>Hotkey</th>
                    <th>Command</th><th>Hotkey</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>Toggle MC</td><td>m</td>
                    <td></td><td></td>
                  </tr>
                  <tr>
                    <td>Next Event</td><td>n</td>
                    <td>Prev Event</td><td>p</td>
                  </tr>
                  <tr>
                    <td>Next Recon</td><td>]</td>
                    <td>Prev Recon</td><td>[</td>
                  </tr>
                  <tr>
                    <td>Next Slice</td><td>k</td>
                    <td>Prev Slice</td><td>j</td>
                  </tr>
                  <tr>
                    <td>Center to Event</td><td>c</td>
                    <td>Reset Camera</td><td>r</td>
                  </tr>
                  <tr>
                    <td>X-U view</td><td>u</td>
                    <td>X-V view</td><td>v</td>
                  </tr>
                  <tr>
                    <td>X-Z view</td><td>z</td>
                    <td>Y-Z view</td><td>c</td>
                  </tr>
                </tbody>
            </table>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>

    <script type="text/javascript" src="{% static 'js/lib/jquery-2.1.4.min.js' %}"></script>
    <script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="{% static 'js/lib/dat.gui.min.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/lib/three.min.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/lib/OrbitControls.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/lib/screenfull.min.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/lib/jstree.min.js' %}"></script>

    <script type="text/javascript" src="{% static 'js/bee.jquery.js' %}"></script>
    <script>
        var options = {};
        var xhr = $.getJSON(window.location.href, function(data){
            $.extend(true, options, data);
        }); // server options
        xhr.then(function(){
            // $.extend(true, options, {
            //   material: {
            //     opacity: 0.2
            //   }
            // }); // user options
            var bee = $("#container").BEE(options);
            // console.log(options);
        });

    </script>
</body>
</html>
